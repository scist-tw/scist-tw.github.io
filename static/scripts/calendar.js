document.addEventListener("DOMContentLoaded",(function(){const e=document.querySelector(".calendar-container"),t=e.querySelector(".calendar-grid"),n=e.querySelector(".calendar-current-date"),a=e.querySelector(".calendar-prev"),c=e.querySelector(".calendar-next");let d=new Date;function r(){const e=d.getFullYear(),a=d.getMonth();n.textContent=`${e} 年 ${a+1} 月`;const c=new Date(e,a,1),r=new Date(e,a+1,0).getDate(),o=c.getDay();t.querySelectorAll(".calendar-grid-day").forEach(((t,n)=>{t.innerHTML="",t.classList.remove("has-event","is-today","is-empty");const c=n-o+1;if(c>0&&c<=r){t.textContent=c,t.dataset.date=c;const n=function(e,t,n){return calendar.events.filter((a=>a.date.year===e&&a.date.month===t&&a.date.day===n))}(e,a+1,c);n.length>0&&(t.classList.add("has-event"),n.forEach((e=>{const n=document.createElement("div");n.classList.add("calendar-event"),n.textContent=e.name,t.appendChild(n)}))),function(e,t,n){const a=new Date;return e===a.getFullYear()&&t===a.getMonth()&&n===a.getDate()}(e,a,c)&&t.classList.add("is-today")}else t.classList.add("is-empty")}))}a.addEventListener("click",(function(){d.setMonth(d.getMonth()-1),r()})),c.addEventListener("click",(function(){d.setMonth(d.getMonth()+1),r()})),r()}));